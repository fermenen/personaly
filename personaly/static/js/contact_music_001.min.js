class Contact_music{constructor(t,e,s,a,i,r,c,o,n,_,u){this.app=t,this.contact=e,this.count_music=s,this.message_error_search=a,this.message_error_save=i,this.message_error_delete_music=r,this.message_success_delete_music=c,this.url_api_add_music_spotify=o,this.url_api_add_music_manual=n,this.url_api_delete_music=_,this.url_api_search_artist=u}get getCountMusic(){return this.count_music}searchArtist(){let t=$("#input_name_artist");t.val().length>1&&$.ajax({url:this.url_api_search_artist,data:{name_artist:t.val(),csrfmiddlewaretoken:this.app.getCsrftoken},type:"POST",dataType:"json",success:e=>{removeSameID("#artist_auto"),$("#name_artist_manual").text(t.val()),$("#result_search_music").removeClass("uk-hidden")},error:t=>{this.app.NotificationError(this.message_error_search)},complete:(t,e)=>{if("success"===e){let e=t.responseJSON.data;for(let t in e.reverse()){let s=`<li id='artist_auto' onclick="musicJS.createContactMusicBySpotify('${e[t].id}')"><a>${e[t].name}</a></li>`;$("#list_result_music").prepend(s)}}}})}createContactMusicBySpotify(t){$.ajax({url:this.url_api_add_music_spotify,data:{id_artist:t,contact:this.contact.getContact,owner:this.contact.getOwner,csrfmiddlewaretoken:this.app.getCsrftoken},type:"POST",dataType:"json",success:t=>{this.app.HideModal(modal_add_music),location.reload()},error:t=>{cleanCloseModalAddMusic(),this.app.NotificationError(this.message_error_save)}})}createContactMusicByManual(){let t=$("#name_artist_manual").text();$.ajax({url:this.url_api_add_music_manual,data:{name_artist:t,contact:this.contact.getContact,owner:this.contact.getOwner,csrfmiddlewaretoken:this.app.getCsrftoken},type:"POST",dataType:"json",success:t=>{this.app.HideModal(modal_add_music),location.reload()},error:t=>{cleanCloseModalAddMusic(),this.app.NotificationError(this.message_error_save)}})}deleteContactMusic(t){let e="#"+t;$.ajax({url:this.url_api_delete_music,data:{id:t,contact:this.contact.getContact,owner:this.contact.getOwner,csrfmiddlewaretoken:this.app.getCsrftoken},type:"POST",dataType:"json",success:t=>{this.app.NotificationSuccess(this.message_success_delete_music),$(e).addClass("uk-hidden"),this.count_music-=1,this.contact.textVisible(this.count_music,"#text_music_contact")},error:t=>{this.app.NotificationError(this.message_error_delete_music)}})}}function removeSameID(t){const e=document.querySelectorAll(t);for(let t=0;t<e.length;t++)e[t].remove()}function cleanCloseModalAddMusic(){UIkit.modal(modal_add_music).hide(),removeSameID("#artist_auto"),$("#result_search_music").addClass("uk-hidden"),$("#input_name_artist").val("")}