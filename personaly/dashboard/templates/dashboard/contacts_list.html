{% extends 'app/base_app.html' %}
{% load i18n %}
{% load static %}
{% block title %}{% translate "Contactos" %} | {% endblock %}

{% block content_main %}

    <div class="container-app uk-container uk-container-large">
        <div class="uk-flex uk-flex-center">
            <div class="uk-card card-contact-list uk-card-default uk-card-body uk-width-1-2@m uk-animation-fade">

                <div id="title_contact_list" class="card-title uk-flex uk-flex-between uk-flex-middle uk-margin-left uk-width">
                    <h1 class="uk-heading-medium">{% translate "Contactos" %}</h1>
                    <button class="uk-button uk-button-default uk-button-small uk-margin-small-right uk-text-middle"><span uk-icon="icon: plus; ratio: 0.85"></span>&nbsp;&nbsp;{% translate "Añadir contacto" %}</button>
                </div>

                <div id="text_contact_list" class="uk-container uk-hidden">
                    <div class="uk-flex-middle" uk-grid>
                        <div class="uk-width-2-3@m uk-flex-first">
                            <div class="uk-margin-left">
                                <span>{% translate "Aún no tienes contactos en personaly, añádelos y empieza a simplificar tu vida." %}</span>
                            </div>
                            <div class="uk-text-center uk-margin-top">
                                <button onclick="appJS.ShowModal(modal_create_contact)"
                                        class="uk-button uk-button-secondary uk-button-large"
                                        type="button">{% translate "Añadir contacto" %}
                                </button>
                            </div>

                        </div>
                        <div class="uk-width-1-3@m ">
                            <img class="uk-preserve" width="400"
                                 src="{% static 'img/app/add_contact.svg' %}" alt="Sin contactos" uk-svg>
                        </div>
                    </div>
                </div>
                <script>
                    appJS.textVisible(appJS.getCountContacts, '#text_contact_list')
                </script>

                <div id="component_all_contacts">
                    <div id="component_order_contacts" class="uk-margin-left uk-margin-bottom">
                    <span class="uk-text-meta"><span
                            uk-icon="arrow-down"></span><span>{% translate "Orden - Nombre [A-Z]" %}</span></span>
                    </div>
                    {% for contact in list_contacts %}
                        <div id="{{ contact.id }}"
                             class="uk-flex uk-flex-middle uk-flex-between uk-visible-toggle app-button-contact uk-margin-bottom"
                             tabindex="-1">
                            <div id="photo_name_tags_contact" class="uk-margin-left uk-flex">
                                <div id="photo_contact">
                                    {% if contact.image_contact %}
                                        <a href={% url 'contact' contact.url %}><img
                                                class="uk-border-circle image-contact" width="50"
                                                height="50"
                                                data-src="/media{{ contact.image_contact }}"
                                                alt="{{ contact.name }} {{ contact.surnames }}" uk-img></a>
                                    {% else %}
                                        <a href={% url 'contact' contact.url %}><img
                                                class="uk-border-circle image-contact" width="50"
                                                height="50"
                                                data-src="{% static 'img/app/contact_holder.jpg' %}"
                                                alt="{{ contact.name }} {{ contact.surnames }}" uk-img></a>
                                    {% endif %}
                                </div>
                                <div id="name_contact" class="uk-flex uk-flex-middle">
                                    <a class="uk-margin-left uk-margin-right"
                                       href={% url 'contact' contact.url %}><span
                                            class="uk-h5 text-button-contact uk-text-middle">{{ contact.name | capfirst }} {{ contact.surnames | capfirst }}</span></a>
                                </div>
                                <div id="tags_contact" class="uk-visible@l uk-flex uk-flex-middle">
                                    {% for tag in tags_list %}
                                        <div class="uk-flex uk-flex-inline">
                                            {% if tag.contact == contact %}
                                                <div class="uk-label tag-contact uk-text- uk-margin-small-right">
                                                    <span class="uk-margin-small-right">{{ tag.icon }}</span>
                                                    <span class="">{{ tag.text }}</span>
                                                </div>
                                            {% endif %}
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                            <div id="iconnav_options_contact" class="uk-visible@l">
                                <ul class="uk-iconnav uk-invisible-hover">
                                    <li>
                                        <a onclick="appJS.openModalDeleteContact('{{ contact.id }}', '{{ contact.name }}')"
                                           class="uk-icon-linl icon_trash" uk-icon="icon: trash"
                                           uk-tooltip="title: {% translate "Eliminar contacto" %}; pos: bottom"></a>
                                    <li><a onclick="appJS.openModalEditContact('{{ contact.id }}')"
                                           class="uk-icon-link icon_app"
                                           uk-icon="file-edit"
                                           uk-tooltip="title: {% translate "Editar contacto" %}; pos: bottom"></a>
                                    <li><a href="#" class="uk-icon-link icon_app" uk-icon="future"
                                           uk-tooltip="title: {% translate "Programar" %}; pos: bottom"></a>
                                </ul>
                            </div>
                        </div>
                    {% endfor %}

                </div>
                <script>
                    appJS.textInVisible(appJS.getCountContacts, '#component_all_contacts')
                </script>

            </div>
        </div>
    </div>

{% endblock %}